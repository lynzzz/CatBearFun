<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>


<body>




<pre><code>
  class Solution {
      public int calculate(String s) {

          char sign = '+';
          Stack&lt;Long> stack = new Stack&lt;>();
          Stack&lt;Character> stackSign = new Stack&lt;>();

          for( int i=0; i&lt;s.length(); i++){
              char c = s.charAt(i);
              if ( s.charAt(i) == ' '){
                  continue;
              }else if ( Character.isDigit(s.charAt(i))){
                  int save = i;
                  while( i&lt;s.length() && Character.isDigit(s.charAt(i))){
                      i++;
                  }
                  Long num = Long.valueOf(s.substring(save, i));
                  i--;

                  if ( sign == '+'){
                      stack.push(num);
                  }else if ( sign == '-'){
                      stack.push(-num);
                  }else if ( sign == '*'){
                      stack.push( stack.pop()*num);
                  }else if ( sign == '/'){
                      stack.push( stack.pop()/ num);
                  }
              }else if( c =='+' || c == '-' || c == '*' || c == '/') {
                  sign = c;
              }else if ( c== '('){
                   stack.push(Long.MAX_VALUE);
                   stackSign.push(sign);
                   sign = '+';
              }else if ( c == ')'){
                  long temp = 0;
                  while(stack.peek() != Long.MAX_VALUE){
                      temp = temp + stack.pop();
                  }
                  stack.pop();  // remove '('

                  sign = stackSign.pop();
                  if ( sign == '+'){
                      stack.push(temp);
                  }else if ( sign == '-'){
                      stack.push(-temp);
                  }else if ( sign == '*'){
                      stack.push( stack.pop()*temp);
                  }else if ( sign == '/'){
                      stack.push( stack.pop()/ temp);
                  }
              }
          }

          long sum = 0;
          while(!stack.isEmpty()){
              sum = sum + stack.pop();
          }

          return (int)sum;

      }
  }

</code></pre>






<div class="comment">
“+，-， *，／, (, ) 四则运算”


算法 ：
stack1里存带符号的数字
stack2里存括号前的符号

1. 遇到数字就提取出来按照逻辑放进stack里： 前面符号是 +-,就直接压，前面符号是*/,把前面的值弹出来和当前值做*/然后在压栈。
2. 遇到符号就变号（不用做任何运算）


</div>




</body>
