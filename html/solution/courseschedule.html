<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>


<body>


<pre><code>
class Solution {
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        
        HashMap&lt;Integer, Integer> degree = new HashMap<>();
        HashMap&lt;Integer, HashSet&lt;Integer>> graph = new HashMap<>();
        
        
        // construct degree
        for( int i=0; i&lt;numCourses;i++){
            degree.put(i, 0);
        }
        
        //construct graph
        for( int[] e : prerequisites){
            
            int from = e[1];
            int to = e[0];
            if ( !graph.containsKey(from)){
                HashSet<Integer> set = new HashSet<>();
                set.add(to);
                graph.put(from, set);
                degree.put(to, degree.get(to) + 1);
            }else{
                HashSet<Integer> set = graph.get(from);
                if ( !set.contains(to)){
                    set.add(to);
                    degree.put(to, degree.get(to) + 1);
                }
            }
        }
        
        // BFS
        Queue<Integer> q = new LinkedList<>();
        for(int key : degree.keySet()){
            if ( degree.get(key) == 0){
                q.add(key);
            }
        }
        
        int count = 0;
        
        while( !q.isEmpty()){
            int n = q.poll();
            count++;
            
            if ( graph.containsKey(n)){                            // topological sorting最后一层的点和孤立的点没有边，所以没有在graph里
                for( int neighbor : graph.get(n)){
                    degree.put(neighbor, degree.get(neighbor) - 1);
                    if ( degree.get(neighbor) == 0){
                        q.add(neighbor);
                    }
                }
            }
        }
        
        
        return count == numCourses;
        
        
    }
}
    }   
}


</code></pre>





<div class="comment">
Time complexity :   O(m+n)   <br>


 topological sorting最后一层的点和孤立的点没有边，所以没有在新建的点图graph里， 所以需要check存在与否,不然BFS会爆



</div>
</body>
