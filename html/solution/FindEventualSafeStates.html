<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>


<body>




<pre><code>

Solution 1 : Naive DFS

class Solution {
    boolean loop = false;
    public List&lt;Integer> eventualSafeNodes(int[][] graph) {
        List&lt;Integer> ret = new ArrayList&lt;>();

        for(int i=0; i&lt;graph.length; i++){

            dfs(i, graph, new HashSet&lt;Integer>());

            if ( !loop){
                ret.add(i);
            }

            loop = false;
        }
        return ret;
    }

    void dfs( int n, int[][] graph, HashSet&lt;Integer> set){
        if (graph[n].length == 0){
            return;
        }

        for( int neighbor : graph[n]){
            if ( set.contains(neighbor)){
                loop = true;
                return;
            }
            set.add(neighbor);
            dfs(neighbor, graph, set);
            set.remove(neighbor);
        }
    }
}

Time complexity O(n^2) Time exceeds limit


Solution II : 有向图找环 DFS三色法
class Solution {
    public List&lt;Integer> eventualSafeNodes(int[][] graph) {

        List&lt;Integer> ret = new ArrayList&lt;>();
        int[] color = new int[graph.length];

        for(int i=0; i&lt;graph.length; i++){
            if ( dfs(graph, i, color)){
                ret.add(i);
            }
        }

        return ret;
    }

    // 0: unvisited, 1:unsafe, 2 safe
    // dfs: returns true if start is safe
    boolean dfs(int[][] graph, int start, int[] color){
        if ( color[start] == 1){
            return false;
        }

        if ( color[start] == 2){
            return true;
        }

        color[start] = 1;

        for(int neighbor: graph[start]){
            if ( !dfs(graph, neighbor, color)){
                return false;
            }
        }

        color[start] = 2;
        return true;
    }
}

Time complexity :   O(V+E)   <br>
Space complexity :  O(N)   <br>

1. 有向图的三色法: 0表示未访问， 1表示访问中间状态，2表示访问终结状态
2. DFS返回true如果这个点是安全的。
3. 下面层全部安全，上面层才安全。下面层有一个不安全，上面层就不安全。
4. 应用范围不清楚！！！


</code></pre>






<div class="comment">




</div>




</body>
