<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>


<body>


<div class="specialcomment">
Using two dummy nodes, 保证了一定有头和尾，简化代码<br>
Facebook phone interview 5/16/18  不考虑size做eviction, 20分钟写完<br>

</div>

<code><pre>
public class Solution {

    class Node{
      int key;
      int val;
      Node pre;
      Node next;
      Node( int key, int val){
          this.key = key;
          this.val = val;
      }
    }

    private HashMap&lt;Integer, Node> m = new HashMap&lt;>();

    private Node LRUhead =  new Node(-1, -1);;
    private Node LRUtail =  new Node(-1, -1);;

    private int capacity;

    public Solution(int capacity) {

        this.capacity = capacity;
        LRUhead.next = LRUtail;
        LRUtail.pre = LRUhead;
    }

    public int get(int key) {
        // write your code here
        if ( !m.containsKey(key) ) return -1;

        removeNode(m.get(key) );
        addNodeToTail(m.get(key));
        return m.get(key).val;
    }

    public void set(int key, int value) {
        // write your code here
        if ( m.containsKey(key) ){
            m.get(key).val = value;
            removeNode(m.get(key));
            addNodeToTail(m.get(key));
        }else{
            if ( m.size() == capacity ){
                m.remove(LRUhead.next.key);
                removeNode(LRUhead.next);
            }

            Node newNode = new Node(key, value);
            m.put(key, newNode);
            addNodeToTail(newNode);
        }

    }

    public void addNodeToTail( Node cur ){

        LRUtail.pre.next = cur;
        cur.pre = LRUtail.pre;
        cur.next = LRUtail;
        LRUtail.pre = cur;
    }

    public void removeNode(Node cur){

        cur.pre.next = cur.next;
        cur.next.pre = cur.pre;
    }
}

</pre></code>


<div class="comment">
Time complexity :  get o(1) set o(1)   <br>
Space complexity :  o(1)   <br>






数据结构  Hashmap + doubly linkedList<br>

辅助函数  addNodetoTail(Node n)   removeNode(Node n);<br>

技巧 ： 用两个dummy node,避免了头尾指针不存在的情况， 使代码简化<br>
</div>


</div>




</body>
