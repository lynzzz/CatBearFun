<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>

<body>
<pre><code>

   class Solution {
    
    Node head;
    Node pre;
    
    public Node treeToDoublyList(Node root) {
        
        
        if ( root == null) return null;
        helper(root);
        
        
        
        // 不连接首尾结点可以不要下面这一段代码。
        // 连接首尾节点开始
        Node tail = head;
        
        while(tail.right != null){
            tail = tail.right;
        }
        
        head.left = tail;
        tail.right = head;
        ／／　连接首位结点结束。
        
        
        
        return head;
    }
    
    void helper(Node root){
        if ( root == null) 
            return;
        
        helper(root.left);
        
        if ( head == null){
            head = root;
            pre = root;
        }else{
            pre.right = root;
            root.left = pre;
            pre = root;
        }
        
        helper(root.right);
    }
}

   Note:
   1. Maintain pre node !
   2. pre, root 一步一步往前变化。

</code></pre>
</body>
