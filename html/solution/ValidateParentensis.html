<html>

<head>
   <link rel="stylesheet" type="text/css" href="../../css/utility.css">     <!-- external css file -->
</head>


<body>



<pre><code>

Solution I: Straight Forward DFS 31/58 Test cases pass
class Solution {
    boolean ret = false;
    
    public boolean checkValidString(String s) {        
        dfs(s, new StringBuilder(), 0);
        
        return ret;
    }
    
    
    void dfs(String s, StringBuilder sb, int pos){
        
        if ( pos == s.length()){
            if (validate(sb)){
                ret = true;
            }
            return;
        }
        
        for(int i=pos; i&lt;s.length(); i++){
            char c =s.charAt(i);
            
            if ( c == '(' || c == ')'){
                sb.append(c);
                
                if (i == s.length()-1){
                    dfs(s,sb, i+1);
                }
                
                continue;
            }
            
            sb.append('(');
            dfs(s, sb, i+1);
            sb.deleteCharAt(sb.length()-1);
            
            sb.append(')');
            dfs(s, sb, i+1);
            sb.deleteCharAt(sb.length()-1);
            
            dfs(s, sb, i+1);            
        }
    }
    
    boolean validate(StringBuilder sb){
        int count  = 0;
        
        for( int i=0; i&lt;sb.length(); i++){
            char c = sb.charAt(i);
            
            if ( c == '(' ) 
                count++;
            else if ( c == ')' ) 
                count--;
            
            
            
            if (count &lt; 0) 
                return false;
        }
        
        return count == 0;
    }
}


Solution II: DFS 需传入左阔号的数量, 和substring, 不可能直接想到.

class Solution {
    public boolean checkValidString(String s) {
        return dfs(s, 0);
    }
    
    boolean dfs(String s, int count){
        
        for(int i=0; i&lt;s.length(); i++){
            char c = s.charAt(i);
            
            if ( c == '(') count++;
            else if ( c == ')'){
                count--;
                if(count &lt; 0) return false;
            }else{
                return dfs(s.substring(i+1), count+1) ||
                       dfs(s.substring(i+1), count  ) ||
                       dfs(s.substring(i+1), count-1);
            }
        }
        
        return count == 0;
    }
}

</code></pre>





</body>
